---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

const base = import.meta.env.BASE_URL.replace(/\/?$/, '/');
---

<Layout title="Contact Us" description="Get in touch with Kairos Advisory Group. Schedule a complimentary consultation with our financial advisers in Singapore. Call +65 9172 8423 or send us a message.">
  <Header />

  <!-- Hero Section -->
  <section class="py-16 md:py-24 px-6 md:px-12 lg:px-20 bg-white">
    <div class="max-w-7xl mx-auto max-w-3xl">
      <p class="text-sm font-semibold tracking-widest text-[#1E3A5F] uppercase mb-4">Contact Us</p>
      <h1 class="font-serif text-4xl md:text-5xl lg:text-6xl text-[#1E3A5F] leading-tight mb-8">
        Let's Start a Conversation
      </h1>
      <p class="text-[#666666] text-lg leading-relaxed">
        Ready to take control of your financial future? We're here to help. Reach out to schedule a complimentary consultation.
      </p>
    </div>
  </section>

  <!-- Form + Contact Info Section -->
  <section class="pb-16 md:pb-24 px-6 md:px-12 lg:px-20 bg-white">
    <div class="max-w-7xl mx-auto">
      <div class="grid lg:grid-cols-2 gap-8 lg:gap-16">
        <!-- Form -->
        <div class="border border-gray-200 rounded-lg p-8">
          <h2 class="text-xl font-bold text-[#1E3A5F] mb-8">Send us a message</h2>
          <form id="contact-form" class="space-y-6">
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm text-[#333333] mb-2">First name *</label>
                <input type="text" name="firstName" required class="w-full border-b border-gray-300 py-2 focus:outline-none focus:border-[#1E5FAA]" />
              </div>
              <div>
                <label class="block text-sm text-[#333333] mb-2">Last name *</label>
                <input type="text" name="lastName" required class="w-full border-b border-gray-300 py-2 focus:outline-none focus:border-[#1E5FAA]" />
              </div>
            </div>
            <div>
              <label class="block text-sm text-[#333333] mb-2">Phone Number *</label>
              <input type="tel" name="phone" required class="w-full border-b border-gray-300 py-2 focus:outline-none focus:border-[#1E5FAA]" />
            </div>
            <div>
              <label class="block text-sm text-[#333333] mb-2">Email Address *</label>
              <input type="email" name="email" required class="w-full border-b border-gray-300 py-2 focus:outline-none focus:border-[#1E5FAA]" />
            </div>
            <div>
              <label class="block text-sm text-[#333333] mb-2">I'm interested in...</label>
              <select name="interest" class="w-full border-b border-gray-300 py-2 focus:outline-none focus:border-[#1E5FAA] bg-white appearance-none cursor-pointer">
                <option value="">Select an option</option>
                <option value="financial-planning">Financial Planning</option>
                <option value="insurance">Insurance Selection</option>
                <option value="investment">Investment Methodologies</option>
                <option value="business">Business Solutions</option>
                <option value="career">Career</option>
                <option value="other">Other</option>
              </select>
            </div>
            <div>
              <label class="block text-sm text-[#333333] mb-2">Message *</label>
              <textarea name="message" required rows="4" placeholder="Tell us about your financial goals or questions..." class="w-full border-b border-gray-300 py-2 focus:outline-none focus:border-[#1E5FAA] resize-none"></textarea>
            </div>
            <button type="submit" id="submit-btn" class="w-full bg-[#1E3A5F] text-white py-3 font-medium hover:bg-[#1A4F8C] transition-colors">
              Send Message
            </button>
          </form>

          <!-- Success message -->
          <div id="form-success" class="hidden text-center py-12">
            <div class="w-16 h-16 rounded-full bg-green-100 flex items-center justify-center mx-auto mb-4">
              <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
              </svg>
            </div>
            <h3 class="text-xl font-bold text-[#1E3A5F] mb-2">Message Sent!</h3>
            <p class="text-[#666666]">Thank you for reaching out. We will be in touch shortly.</p>
          </div>

          <!-- Error message -->
          <div id="form-error" class="hidden mt-4 p-4 bg-red-50 border border-red-200 rounded-lg">
            <p class="text-red-700 text-sm">Something went wrong. Please try again or email us directly at <a href="mailto:kairosadvisorygroup@gmail.com" class="underline">kairosadvisorygroup@gmail.com</a>.</p>
          </div>
        </div>

        <!-- Contact Information -->
        <div class="space-y-12">
          <h2 class="text-2xl font-bold text-[#1E3A5F]">Contact Information</h2>

          <!-- Phone -->
          <div class="flex items-start gap-4">
            <div class="w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center flex-shrink-0">
              <svg class="w-5 h-5 text-[#1E3A5F]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
              </svg>
            </div>
            <div>
              <p class="text-sm text-[#666666]">Phone</p>
              <p class="text-lg font-bold text-[#1E3A5F]">+65 9172 8423</p>
            </div>
          </div>

          <!-- Email -->
          <div class="flex items-start gap-4">
            <div class="w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center flex-shrink-0">
              <svg class="w-5 h-5 text-[#1E3A5F]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
              </svg>
            </div>
            <div>
              <p class="text-sm text-[#666666]">Email</p>
              <p class="text-lg font-bold text-[#1E3A5F]">kairosadvisorygroup@gmail.com</p>
            </div>
          </div>

          <!-- Office Hours -->
          <div class="flex items-start gap-4">
            <div class="w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center flex-shrink-0">
              <svg class="w-5 h-5 text-[#1E3A5F]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
            </div>
            <div>
              <p class="text-sm text-[#666666]">Office Hours</p>
              <p class="text-lg font-bold text-[#1E3A5F]">Mon - Fri: 9am - 6pm</p>
            </div>
          </div>

          <hr class="border-gray-200" />

          <!-- Our Office -->
          <div>
            <h3 class="text-2xl font-bold text-[#1E3A5F] mb-4">Our Office</h3>
            <p class="text-[#666666]">Singapore Financial Centre</p>
            <p class="text-[#666666]">(Part of IPP Financial Advisers Pte Ltd)</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <Footer />

  <script>
    const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzAv15XemXPeXBdY-Lu5mXbGmk0o4VTEkKKGOTS0liujjklavx3r_atHC7eq9e6fAvu/exec';

    const form = document.getElementById('contact-form') as HTMLFormElement;
    const submitBtn = document.getElementById('submit-btn') as HTMLButtonElement;
    const successDiv = document.getElementById('form-success') as HTMLElement;
    const errorDiv = document.getElementById('form-error') as HTMLElement;

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      errorDiv.classList.add('hidden');

      const originalText = submitBtn.textContent;
      submitBtn.textContent = 'Sending...';
      submitBtn.disabled = true;

      const data = {
        firstName: (form.elements.namedItem('firstName') as HTMLInputElement).value,
        lastName: (form.elements.namedItem('lastName') as HTMLInputElement).value,
        phone: (form.elements.namedItem('phone') as HTMLInputElement).value,
        email: (form.elements.namedItem('email') as HTMLInputElement).value,
        interest: (form.elements.namedItem('interest') as HTMLSelectElement).value,
        message: (form.elements.namedItem('message') as HTMLTextAreaElement).value,
      };

      try {
        await fetch(GOOGLE_SCRIPT_URL, {
          method: 'POST',
          mode: 'no-cors',
          headers: { 'Content-Type': 'text/plain' },
          body: JSON.stringify(data),
        });

        form.classList.add('hidden');
        successDiv.classList.remove('hidden');
      } catch {
        errorDiv.classList.remove('hidden');
        submitBtn.textContent = originalText;
        submitBtn.disabled = false;
      }
    });
  </script>
</Layout>
